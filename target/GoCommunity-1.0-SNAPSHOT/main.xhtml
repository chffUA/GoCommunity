<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <h:head>
        <title>Start Page</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    </h:head>
    <h:body>
        <h1>Main page</h1>
        <label>Hello #{comBean.user.name}</label>
        <br/><br/>
        <h:form>
        <h:commandButton value="New Project" action="newProject.xhtml"/>
        <br/><br/>
        <label><b>Projects you own:</b></label>
        <br/><br/>
        <c:choose>
            <c:when test="#{comBean.user.owns.size()>0}">
                <c:forEach var="i" begin="0" end="#{comBean.user.owns.size()-1}">
                    #{comBean.getProject(comBean.user.owns.get(i)).getOverview()}
                    <h:commandButton value="Project Page" action="#{comBean.goToOwnedProjectPage(i)}"/>
                    <br/>
                </c:forEach>
            </c:when>
            <c:otherwise>
                You haven't created any projects yet!<br/>
            </c:otherwise>
        </c:choose>
        <br/>
        <label><b>Projects you follow:</b></label>
        <br/><br/>
        <c:choose>
            <c:when test="#{comBean.user.follows.size()>0}">
                <c:forEach var="i" begin="0" end="#{comBean.user.follows.size()-1}">
                    #{comBean.getProject(comBean.user.follows.get(i)).getOverview()}
                    <h:commandButton value="Project Page" action="#{comBean.goToFollowedProjectPage(i)}"/>
                    <br/>
                </c:forEach>
            </c:when>
            <c:otherwise>
                You're not following any projects!<br/>
            </c:otherwise>
        </c:choose>
        <br/>
        <label><b>Trending projects:</b></label>
        <br/><br/>
        <c:choose>
            <c:when test="#{comBean.getPopularProjects().size()>0}">
                <c:forEach var="i" begin="0" end="#{comBean.getPopularProjects().size()-1}">
                    #{comBean.getPopularProjects().get(i).getOverview()}
                    <h:commandButton value="Project Page" action="#{comBean.goToProjectPage(i)}"/>
                    <br/>
                </c:forEach>
            </c:when>
            <c:otherwise>
                There are no other projects!<br/>
            </c:otherwise>
        </c:choose>
        <br/>
        </h:form>
    </h:body>
</html>
